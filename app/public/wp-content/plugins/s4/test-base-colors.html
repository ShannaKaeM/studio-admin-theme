<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Base Colors Integration Test</title>
    <link rel="stylesheet" href="./dist/studio1.css">
    <style>
        body {
            margin: 0;
            font-family: var(--font-family);
        }
        
        /* Test components to verify base color changes cascade */
        .test-component {
            padding: 2rem;
            margin: 1rem;
            border-radius: 0.5rem;
        }
        
        .test-primary {
            background: var(--color1-500);
            color: var(--color4-100);
        }
        
        .test-secondary {
            background: var(--color2-500);
            color: var(--color4-100);
        }
        
        .test-neutral {
            background: var(--color3-500);
            color: var(--color4-100);
        }
        
        .test-base {
            background: var(--color4-500);
            color: var(--color3-800);
        }
    </style>
</head>
<body>
    <!-- Studio1 Interface Container -->
    <div id="studio1-root"></div>
    
    <!-- Test components to see base color changes -->
    <div style="position: fixed; top: 0; right: 0; width: 300px; padding: 1rem; background: white; border-left: 1px solid #ccc; height: 100vh; overflow-y: auto; z-index: 1000;">
        <h3>Color Test Components</h3>
        <p style="font-size: 0.875rem; color: #666; margin-bottom: 1rem;">
            These components should update when you change base colors in the Base tab.
        </p>
        
        <div class="test-component test-primary">
            <strong>Primary (color1-500)</strong><br>
            Should change when you modify Color 1
        </div>
        
        <div class="test-component test-secondary">
            <strong>Secondary (color2-500)</strong><br>
            Should change when you modify Color 2
        </div>
        
        <div class="test-component test-neutral">
            <strong>Neutral (color3-500)</strong><br>
            Should change when you modify Color 3
        </div>
        
        <div class="test-component test-base">
            <strong>Base (color4-500)</strong><br>
            Should change when you modify Color 4
        </div>
        
        <!-- Current CSS Variables Display -->
        <div style="margin-top: 1rem; padding: 1rem; background: #f5f5f5; border-radius: 0.25rem;">
            <h4 style="margin: 0 0 0.5rem 0; font-size: 0.875rem;">Current Base Colors:</h4>
            <div style="font-family: monospace; font-size: 0.75rem; line-height: 1.4;">
                <div>--color1: <span id="color1-value">Loading...</span></div>
                <div>--color2: <span id="color2-value">Loading...</span></div>
                <div>--color3: <span id="color3-value">Loading...</span></div>
                <div>--color4: <span id="color4-value">Loading...</span></div>
            </div>
        </div>
    </div>

    <script src="./dist/studio1.js"></script>
    <script src="./integration-test.js"></script>
    <script>
        // Display current CSS variable values
        function updateColorDisplay() {
            const root = document.documentElement;
            document.getElementById('color1-value').textContent = getComputedStyle(root).getPropertyValue('--color1').trim() || 'Not set';
            document.getElementById('color2-value').textContent = getComputedStyle(root).getPropertyValue('--color2').trim() || 'Not set';
            document.getElementById('color3-value').textContent = getComputedStyle(root).getPropertyValue('--color3').trim() || 'Not set';
            document.getElementById('color4-value').textContent = getComputedStyle(root).getPropertyValue('--color4').trim() || 'Not set';
        }
        
        // Update display initially and every 2 seconds to catch changes
        updateColorDisplay();
        setInterval(updateColorDisplay, 2000);
        
        // Watch for changes to CSS variables
        const observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                if (mutation.type === 'attributes' && mutation.attributeName === 'style') {
                    updateColorDisplay();
                }
            });
        });
        
        observer.observe(document.documentElement, {
            attributes: true,
            attributeFilter: ['style']
        });
    </script>
</body>
</html>