<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Studio Development Panel - Projects Editor</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* ================================== */
        /* DEV PANEL CSS VARIABLES & THEME   */
        /* ================================== */
        
        :root {
            /* Base Colors (Neutrals) - Same as Studio */
            --dp-base-50: #ffffff;
            --dp-base-100: #f8f8f8;
            --dp-base-200: #e8e8e8;
            --dp-base-300: #d1d1d1;
            --dp-base-400: #a0a0a0;
            --dp-base-500: #737373;
            --dp-base-600: #525252;
            --dp-base-700: #404040;
            --dp-base-800: #262626;
            --dp-base-900: #171717;
            --dp-base-950: #000000;

            /* Dev Panel Colors - Custom Brand */
            --dp-primary-50: #fdf2f7;
            --dp-primary-100: #fce7f0;
            --dp-primary-200: #fbcfe1;
            --dp-primary-300: #f7aac7;
            --dp-primary-400: #f277a1;
            --dp-primary-500: #b25977;  /* Dev Panel Primary */
            --dp-primary-600: #be185d;
            --dp-primary-700: #a21650;
            --dp-primary-800: #831843;
            --dp-primary-900: #701a39;

            /* Dev Panel Secondary Colors */
            --dp-secondary-50: #fef7ed;
            --dp-secondary-100: #fdedd6;
            --dp-secondary-200: #fbd7ac;
            --dp-secondary-300: #f8bb77;
            --dp-secondary-400: #f59540;
            --dp-secondary-500: #d46536;  /* Dev Panel Secondary */
            --dp-secondary-600: #c2522b;
            --dp-secondary-700: #a13e25;
            --dp-secondary-800: #823327;
            --dp-secondary-900: #6c2c23;
            
            /* Typography - Same Scale as Studio */
            --dp-font-family: 'Montserrat', system-ui, sans-serif;
            --dp-text-metadata: 0.75rem;        /* 12px */
            --dp-text-interface: 0.875rem;      /* 14px */
            --dp-text-body: 1rem;               /* 16px */
            --dp-text-description: 1.0625rem;   /* 17px */
            --dp-text-card-title: 1.125rem;     /* 18px */
            --dp-text-section-title: 1.25rem;   /* 20px */
            --dp-text-icon: 1.5rem;             /* 24px */
            --dp-text-page-title: 1.875rem;     /* 30px */

            /* Border Radius - Same as Studio */
            --dp-radius-sm: 0.375rem;
            --dp-radius: 0.5rem;
            --dp-radius-md: 0.625rem;
            --dp-radius-lg: 0.75rem;
            --dp-radius-xl: 1rem;

            /* Border Thickness - Same as Studio */
            --dp-border-thin: 1px;
            --dp-border-medium: 2px;
            --dp-border-thick: 3px;

            /* Spacing Scale - Same as Studio */
            --dp-space-1: 0.25rem;
            --dp-space-2: 0.5rem;
            --dp-space-3: 0.75rem;
            --dp-space-4: 1rem;
            --dp-space-5: 2rem;
            --dp-space-6: 3rem;
        }

        /* Light Mode Theme Colors */
        :root, [data-theme="light"] {
            --dp-bg-main: var(--dp-base-50);
            --dp-bg-header: var(--dp-base-200);
            --dp-bg-sidebar: var(--dp-base-100);
            --dp-bg-sidebar-header: var(--dp-base-300);
            --dp-bg-card: var(--dp-base-200);
            --dp-bg-controls: var(--dp-base-100);
            --dp-bg-input: var(--dp-base-200);
            --dp-bg-button: var(--dp-base-300);

            --dp-text-content: var(--dp-base-900);
            --dp-text-heading: var(--dp-base-900);
            --dp-text-supporting: var(--dp-base-700);
            --dp-text-subtle: var(--dp-base-600);
            --dp-text-navigation: var(--dp-base-800);
            --dp-text-emphasis: var(--dp-base-50);

            --dp-border-ui: var(--dp-base-300);
            --dp-border-primary: var(--dp-base-400);
            --dp-border-card: var(--dp-base-300);
        }

        /* Dark Mode Theme Colors */
        [data-theme="dark"] {
            --dp-bg-main: var(--dp-base-900);
            --dp-bg-header: var(--dp-base-800);
            --dp-bg-sidebar: var(--dp-base-800);
            --dp-bg-sidebar-header: var(--dp-base-700);
            --dp-bg-card: var(--dp-base-800);
            --dp-bg-controls: var(--dp-base-700);
            --dp-bg-input: var(--dp-base-700);
            --dp-bg-button: var(--dp-base-600);

            --dp-text-content: var(--dp-base-100);
            --dp-text-heading: var(--dp-base-50);
            --dp-text-supporting: var(--dp-base-300);
            --dp-text-subtle: var(--dp-base-400);
            --dp-text-navigation: var(--dp-base-200);
            --dp-text-emphasis: var(--dp-base-50);

            --dp-border-ui: var(--dp-base-600);
            --dp-border-primary: var(--dp-base-500);
            --dp-border-card: var(--dp-base-600);
        }

        /* ================================== */
        /* UNIVERSAL DEV PANEL COMPONENTS     */
        /* ================================== */

        /* Reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--dp-font-family);
            background: var(--dp-bg-main);
            color: var(--dp-text-content);
            overflow: hidden;
        }

        /* Universal Card Component */
        .dp-card {
            background: var(--dp-bg-card);
            border: var(--dp-border-thick) solid var(--dp-border-primary);
            border-radius: var(--dp-radius-xl);
            min-height: 200px;
            padding: var(--dp-space-4);
            transition: all 0.2s ease;
        }

        .dp-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        /* Universal Sidebar Component */
        .dp-sidebar {
            background: var(--dp-bg-sidebar);
            width: 300px;
            height: 100vh;
            border-right: 1px solid var(--dp-border-ui);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease, width 0.3s ease;
            position: relative;
            z-index: 10;
        }

        .dp-sidebar-header {
            padding: var(--dp-space-5);
            border-bottom: 1px solid var(--dp-border-ui);
            background: var(--dp-bg-sidebar-header);
        }

        .dp-sidebar-nav {
            flex: 1;
            padding: var(--dp-space-5);
            overflow-y: auto;
        }

        .dp-sidebar-nav-section {
            margin-bottom: var(--dp-space-6);
        }

        .dp-sidebar-nav-title {
            font-size: var(--dp-text-metadata);
            font-weight: 600;
            color: var(--dp-text-subtle);
            margin-bottom: var(--dp-space-3);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Universal Navigation */
        .dp-nav {
            display: flex;
            gap: var(--dp-space-6);
        }

        .dp-nav-item {
            padding: var(--dp-space-2) var(--dp-space-4);
            color: var(--dp-text-navigation);
            text-decoration: none;
            font-weight: 500;
            font-size: var(--dp-text-interface);
            border-radius: var(--dp-radius);
            transition: all 0.2s ease;
            border: 1px solid transparent;
            opacity: 0.7;
            cursor: pointer;
        }

        .dp-nav-item:hover {
            opacity: 1;
            background: rgba(178, 89, 119, 0.1);
        }

        .dp-nav-item.active {
            opacity: 1;
            background: rgba(178, 89, 119, 0.15);
            border-color: rgba(178, 89, 119, 0.2);
        }

        /* Universal Section Title */
        .dp-section-title {
            font-size: var(--dp-text-interface);
            font-weight: 600;
            color: var(--dp-text-subtle);
            margin-bottom: var(--dp-space-3);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Universal Form Components */
        .dp-input, .dp-select, .dp-textarea {
            width: 100%;
            padding: var(--dp-space-3);
            border: var(--dp-border-thin) solid var(--dp-border-ui);
            border-radius: var(--dp-radius);
            background: var(--dp-bg-input);
            color: var(--dp-text-content);
            font-family: var(--dp-font-family);
            font-size: var(--dp-text-interface);
        }

        .dp-input:focus, .dp-select:focus, .dp-textarea:focus {
            outline: none;
            border-color: var(--dp-primary-500);
            box-shadow: 0 0 0 2px rgba(178, 89, 119, 0.2);
        }

        .dp-textarea {
            min-height: 120px;
            resize: vertical;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.8rem;
        }

        .dp-button {
            padding: var(--dp-space-3) var(--dp-space-4);
            border: var(--dp-border-thin) solid var(--dp-primary-500);
            border-radius: var(--dp-radius);
            background: var(--dp-primary-500);
            color: white;
            font-family: var(--dp-font-family);
            font-size: var(--dp-text-interface);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            width: 100%;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .dp-button:hover {
            background: var(--dp-primary-600);
            border-color: var(--dp-primary-600);
        }

        .dp-button.secondary {
            background: var(--dp-bg-button);
            color: var(--dp-text-content);
            border-color: var(--dp-border-ui);
        }

        .dp-button.secondary:hover {
            background: var(--dp-bg-card);
            border-color: var(--dp-border-card);
        }

        /* ================================== */
        /* DEV PANEL LAYOUT                   */
        /* ================================== */

        .dp-app {
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        .dp-layout {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        .dp-main {
            display: flex;
            flex-direction: column;
            flex: 1;
            overflow: hidden;
        }

        .dp-top-header {
            padding: var(--dp-space-4) var(--dp-space-6);
            border-bottom: 1px solid var(--dp-border-ui);
            background: var(--dp-bg-header);
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 80px;
        }

        .dp-content {
            flex: 1;
            padding: var(--dp-space-5);
            overflow-y: auto;
            background: var(--dp-bg-main);
        }

        .dp-right-sidebar {
            background: var(--dp-bg-sidebar);
            width: 350px;
            border-left: 1px solid var(--dp-border-ui);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease, width 0.3s ease;
            position: relative;
            z-index: 10;
        }

        .dp-right-content {
            flex: 1;
            padding: var(--dp-space-5);
            overflow-y: auto;
        }

        .dp-brand {
            display: flex;
            align-items: center;
            gap: var(--dp-space-3);
        }

        .dp-logo {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--dp-primary-500), var(--dp-secondary-500));
            border-radius: var(--dp-radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: var(--dp-text-card-title);
        }

        .dp-title {
            font-size: var(--dp-text-card-title);
            font-weight: 600;
            color: var(--dp-text-content);
        }

        .dp-subtitle {
            font-size: var(--dp-text-metadata);
            color: var(--dp-text-subtle);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* ================================== */
        /* DEV PANEL SCOPES                   */
        /* ================================== */

        /* Projects Editor Scope */
        .dp-sidebar.projects {
            /* Projects editor specific sidebar */
        }

        .dp-card.projects {
            min-height: 300px;
        }

        .dp-card.projects.editor {
            /* Component editor card */
        }

        .dp-card.projects.preview {
            /* HTML preview card */
            overflow: hidden;
        }

        /* ================================== */
        /* COMPONENT EDITOR SPECIFIC          */
        /* ================================== */

        .dp-field {
            margin-bottom: var(--dp-space-4);
        }

        .dp-field-label {
            display: block;
            font-size: var(--dp-text-interface);
            font-weight: 500;
            color: var(--dp-text-supporting);
            margin-bottom: var(--dp-space-2);
        }

        .dp-component-list {
            list-style: none;
        }

        .dp-component-item {
            display: flex;
            align-items: center;
            gap: var(--dp-space-3);
            padding: var(--dp-space-3);
            border-radius: var(--dp-radius);
            margin-bottom: var(--dp-space-2);
            transition: all 0.2s ease;
            cursor: pointer;
            border: 1px solid transparent;
        }

        .dp-component-item:hover {
            background: var(--dp-bg-card);
            border-color: var(--dp-border-ui);
        }

        .dp-component-item.active {
            background: var(--dp-primary-500);
            color: var(--dp-text-emphasis);
            border-color: var(--dp-primary-500);
        }

        .dp-component-icon {
            width: 24px;
            height: 24px;
            border-radius: var(--dp-radius-sm);
            background: var(--dp-primary-500);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: white;
            font-weight: 600;
        }

        .dp-component-item.active .dp-component-icon {
            background: rgba(255, 255, 255, 0.2);
        }

        .dp-component-info {
            flex: 1;
        }

        .dp-component-name {
            font-size: var(--dp-text-interface);
            font-weight: 500;
            color: var(--dp-text-content);
            margin-bottom: var(--dp-space-1);
        }

        .dp-component-item.active .dp-component-name {
            color: var(--dp-text-emphasis);
        }

        .dp-component-meta {
            font-size: var(--dp-text-metadata);
            color: var(--dp-text-subtle);
        }

        .dp-component-item.active .dp-component-meta {
            color: rgba(255, 255, 255, 0.8);
        }

        .dp-preview-frame {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: var(--dp-radius);
            background: white;
            transition: all 0.3s ease;
        }
        
        /* Full view mode styles */
        .dp-app.full-view .dp-sidebar,
        .dp-app.full-view .dp-right-sidebar {
            display: none !important;
        }
        
        .dp-app.full-view .dp-main {
            width: 100%;
        }

        /* Theme Toggle */
        .dp-theme-toggle {
            width: 40px;
            height: 20px;
            border-radius: 10px;
            background: var(--dp-base-400);
            border: none;
            cursor: pointer;
            position: relative;
            transition: all 0.2s ease;
        }

        .dp-theme-toggle::after {
            content: '';
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: white;
            position: absolute;
            top: 2px;
            left: 2px;
            transition: all 0.2s ease;
        }

        [data-theme="dark"] .dp-theme-toggle {
            background: var(--dp-primary-500);
        }

        [data-theme="dark"] .dp-theme-toggle::after {
            transform: translateX(20px);
        }

        /* ================================== */
        /* SIMPLIFIED FOR DESKTOP ONLY       */
        /* ================================== */
        
        /* Keep simple desktop layout only */
        .dp-sidebar {
            width: 300px;
        }
        
        .dp-right-sidebar {
            width: 350px;
        }
    </style>
</head>
<body data-theme="dark">
    <div class="dp-app">
        <div class="dp-layout">
            <!-- Left Sidebar -->
            <div class="dp-sidebar projects">
                <div class="dp-sidebar-header">
                    <div class="dp-brand">
                        <div class="dp-logo">DP</div>
                        <div>
                            <div class="dp-title">Dev Panel</div>
                            <div class="dp-subtitle">Projects Editor</div>
                        </div>
                    </div>
                </div>

                <nav class="dp-sidebar-nav" style="display: flex; flex-direction: column;">
                    <div class="dp-sidebar-nav-section" style="display: flex; flex-direction: column;">
                        <div class="dp-sidebar-nav-title">Design System</div>
                        <a href="#" class="dp-nav-item active" data-page="projects" style="display: flex; align-items: center; gap: var(--dp-space-2);">
                            <span>🏗️</span>
                            Projects
                        </a>
                        <a href="#" class="dp-nav-item" data-page="colors" style="display: flex; align-items: center; gap: var(--dp-space-2);">
                            <span>🎨</span>
                            Colors
                        </a>
                        <a href="#" class="dp-nav-item" data-page="typography" style="display: flex; align-items: center; gap: var(--dp-space-2);">
                            <span>📝</span>
                            Typography
                        </a>
                        <a href="#" class="dp-nav-item" data-page="layouts" style="display: flex; align-items: center; gap: var(--dp-space-2);">
                            <span>📐</span>
                            Layouts
                        </a>
                        <a href="#" class="dp-nav-item" data-page="scopes" style="display: flex; align-items: center; gap: var(--dp-space-2);">
                            <span>💎</span>
                            Scopes
                        </a>
                    </div>

                    <div class="dp-sidebar-nav-section" style="display: flex; flex-direction: column;">
                        <div class="dp-sidebar-nav-title">Settings</div>
                        <a href="#" class="dp-nav-item" data-page="settings" style="display: flex; align-items: center; gap: var(--dp-space-2);">
                            <span>⚙️</span>
                            Preferences
                        </a>
                    </div>
                </nav>

                <div style="padding: var(--dp-space-4); margin-top: auto; border-top: 1px solid var(--dp-border-ui);">
                    <div style="display: flex; align-items: center; justify-content: space-between;">
                        <div style="font-size: var(--dp-text-metadata); color: var(--dp-text-subtle);">
                            Toggle Theme
                        </div>
                        <button class="dp-theme-toggle" onclick="toggleTheme()" title="Switch between light and dark mode"></button>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="dp-main">
                <!-- Top Header -->
                <div class="dp-top-header">
                    <nav class="dp-nav projects">
                        <a href="#" class="dp-nav-item active">Editor</a>
                        <a href="#" class="dp-nav-item">Preview</a>
                        <a href="#" class="dp-nav-item">JSON</a>
                        <a href="#" class="dp-nav-item">Export</a>
                    </nav>
                    <div style="display: flex; align-items: center; gap: var(--dp-space-4);">
                        <div style="font-size: var(--dp-text-metadata); color: var(--dp-text-subtle);" id="editing-indicator">
                            Editing: .card.projects.dashboard
                        </div>
                        <button class="dp-button secondary" onclick="toggleFullPreview()" style="padding: var(--dp-space-1) var(--dp-space-2); font-size: var(--dp-text-metadata); width: auto;" id="full-view-toggle">
                            🔍 Full View
                        </button>
                    </div>
                </div>

                <!-- Content Area -->
                <div class="dp-content">
                    <div class="dp-card projects preview">
                        <iframe class="dp-preview-frame" src="./STUDIO-MOC.html" title="Projects Page Preview"></iframe>
                    </div>
                </div>
            </div>

            <!-- Right Sidebar -->
            <div class="dp-right-sidebar">
                <div class="dp-right-content">
                    <!-- Progressive Selection -->
                    <div class="dp-section">
                        <h3 class="dp-section-title projects">Projects Page Editor</h3>
                        
                        <!-- Level 1: Page Level vs Tab Level -->
                        <div class="dp-field">
                            <label class="dp-field-label">What do you want to edit?</label>
                            <select class="dp-select" id="edit-level-select">
                                <option value="">Select editing level...</option>
                                <option value="page-level">Page Level (applies to all tabs)</option>
                                <option value="dashboard">Dashboard Tab</option>
                                <option value="assets">Assets Tab</option>
                                <option value="settings">Settings Tab</option>
                                <option value="archive">Archive Tab</option>
                            </select>
                        </div>

                        <!-- Level 2: Page Level Components (hidden initially) -->
                        <div class="dp-field" id="page-level-options" style="display: none;">
                            <label class="dp-field-label">Page Level Components</label>
                            <select class="dp-select" id="page-component-select">
                                <option value="">Select component...</option>
                                <option value="top-header">Top Header Navigation</option>
                                <option value="sidebar">Left Sidebar</option>
                                <option value="section-header">Section Header</option>
                                <option value="main-content">Main Content Wrapper</option>
                                <option value="grid-system">Grid System</option>
                            </select>
                        </div>

                        <!-- Level 2: Tab Level Components (hidden initially) -->
                        <div class="dp-field" id="tab-level-options" style="display: none;">
                            <label class="dp-field-label">Tab Level Components</label>
                            <select class="dp-select" id="tab-component-select">
                                <option value="">Select component...</option>
                                <option value="card">Card Component</option>
                                <option value="section-title">Section Title</option>
                                <option value="grid-layout">Grid Layout</option>
                                <option value="status">Status Badge</option>
                                <option value="stats">Statistics Display</option>
                            </select>
                        </div>

                        <!-- Level 3: Component Scopes (hidden initially) -->
                        <div class="dp-field" id="component-scopes" style="display: none;">
                            <label class="dp-field-label">Component Scopes</label>
                            <select class="dp-select" id="scope-select">
                                <option value="">Select scope...</option>
                                <!-- Populated dynamically based on component selection -->
                            </select>
                        </div>

                        <!-- Helper Text -->
                        <div class="dp-field" id="helper-text" style="font-size: var(--dp-text-metadata); color: var(--dp-text-subtle); line-height: 1.4;">
                            Choose what you want to edit and options will appear progressively.
                        </div>
                    </div>

                    <!-- Component Editor (hidden initially) -->
                    <div class="dp-section" id="component-editor" style="display: none;">
                        <h3 class="dp-section-title projects">Component Variables</h3>
                        
                        <div class="dp-field">
                            <label class="dp-field-label">CSS Selector</label>
                            <input type="text" class="dp-input" value="" readonly id="css-selector">
                        </div>

                        <div class="dp-field">
                            <label class="dp-field-label">Scope Breadcrumb</label>
                            <input type="text" class="dp-input" value="" readonly id="scope-breadcrumb">
                        </div>

                        <div class="dp-field">
                            <label class="dp-field-label">Variables (JSON)</label>
                            <textarea class="dp-textarea" id="component-variables" placeholder="Component variables will appear here when you make a selection..."></textarea>
                        </div>

                        <div class="dp-field">
                            <button class="dp-button">💾 Update Component</button>
                        </div>

                        <div class="dp-field">
                            <button class="dp-button secondary">🔄 Reset to Default</button>
                        </div>

                        <div class="dp-field">
                            <button class="dp-button secondary">📋 Copy CSS Selector</button>
                        </div>
                    </div>

                    <!-- Selection Summary (hidden initially) -->
                    <div class="dp-section" id="selection-summary" style="display: none;">
                        <h3 class="dp-section-title projects">Current Selection</h3>
                        
                        <div class="dp-field">
                            <div id="selection-info" style="font-size: var(--dp-text-metadata); color: var(--dp-text-subtle); line-height: 1.6;">
                                <!-- Populated dynamically -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Theme Toggle
        function toggleTheme() {
            const body = document.body;
            
            if (body.getAttribute('data-theme') === 'dark') {
                body.removeAttribute('data-theme');
            } else {
                body.setAttribute('data-theme', 'dark');
            }
        }

        // Component Editor Functions
        let currentComponent = 'card';
        let studioData = null;

        // Load the studio JSON data
        async function loadStudioData() {
            try {
                const response = await fetch('./STUDIO-INPUT.json');
                studioData = await response.json();
                console.log('✅ Studio data loaded:', studioData);
                
                // Populate component editor
                updateComponentEditor();
                
            } catch (error) {
                console.warn('⚠️ Could not load studio data:', error);
            }
        }

        // Update component editor with current selection
        function updateComponentEditor() {
            if (!studioData) return;
            
            const components = studioData.studioVariables.components;
            const universalCard = components.universalCard?.elements?.card;
            
            if (universalCard) {
                const textarea = document.getElementById('component-variables');
                textarea.value = JSON.stringify(universalCard.variables, null, 2);
            }
        }

        // Progressive disclosure and dynamic updates
        document.addEventListener('DOMContentLoaded', function() {
            loadStudioData();
            
            // Get all elements for progressive disclosure
            const editLevelSelect = document.getElementById('edit-level-select');
            const pageLevelOptions = document.getElementById('page-level-options');
            const tabLevelOptions = document.getElementById('tab-level-options');
            const componentScopes = document.getElementById('component-scopes');
            const componentEditor = document.getElementById('component-editor');
            const selectionSummary = document.getElementById('selection-summary');
            const helperText = document.getElementById('helper-text');
            
            const pageComponentSelect = document.getElementById('page-component-select');
            const tabComponentSelect = document.getElementById('tab-component-select');
            const scopeSelect = document.getElementById('scope-select');
            
            // Component scope definitions
            const componentScopes_data = {
                'card': ['universal', 'projects', 'projects.dashboard', 'projects.add-new'],
                'section-title': ['universal', 'projects'],
                'grid-layout': ['universal', 'projects', 'projects.dashboard'],
                'status': ['universal'],
                'stats': ['universal'],
                'top-header': ['universal', 'projects'],
                'sidebar': ['universal', 'projects'],
                'section-header': ['universal', 'projects'],
                'main-content': ['universal', 'projects'],
                'grid-system': ['universal', 'projects']
            };
            
            // Level 1: Edit Level Selection
            editLevelSelect.addEventListener('change', function() {
                const value = this.value;
                
                // Hide all subsequent levels
                pageLevelOptions.style.display = 'none';
                tabLevelOptions.style.display = 'none';
                componentScopes.style.display = 'none';
                componentEditor.style.display = 'none';
                selectionSummary.style.display = 'none';
                
                // Reset selects
                pageComponentSelect.value = '';
                tabComponentSelect.value = '';
                scopeSelect.value = '';
                
                if (value === 'page-level') {
                    pageLevelOptions.style.display = 'block';
                    helperText.textContent = 'Select a page-level component that applies to all tabs.';
                } else if (value && value !== 'page-level') {
                    tabLevelOptions.style.display = 'block';
                    helperText.textContent = `Select a component specific to the ${value} tab.`;
                } else {
                    helperText.textContent = 'Choose what you want to edit and options will appear progressively.';
                }
            });
            
            // Level 2: Component Selection (Page Level)
            pageComponentSelect.addEventListener('change', function() {
                const component = this.value;
                if (component) {
                    showComponentScopes(component, editLevelSelect.value);
                }
            });
            
            // Level 2: Component Selection (Tab Level)
            tabComponentSelect.addEventListener('change', function() {
                const component = this.value;
                if (component) {
                    showComponentScopes(component, editLevelSelect.value);
                }
            });
            
            // Level 3: Scope Selection
            scopeSelect.addEventListener('change', function() {
                const scope = this.value;
                if (scope) {
                    showComponentEditor();
                }
            });
            
            // Function to show component scopes
            function showComponentScopes(component, editLevel) {
                const scopes = componentScopes_data[component] || ['universal'];
                
                // Populate scope dropdown
                scopeSelect.innerHTML = '<option value="">Select scope...</option>';
                scopes.forEach(scope => {
                    const option = document.createElement('option');
                    option.value = scope;
                    option.textContent = scope.charAt(0).toUpperCase() + scope.slice(1).replace('.', ' → ');
                    scopeSelect.appendChild(option);
                });
                
                componentScopes.style.display = 'block';
                helperText.textContent = 'Choose the scope level for this component.';
            }
            
            // Function to show component editor
            function showComponentEditor() {
                const editLevel = editLevelSelect.value;
                const component = pageComponentSelect.value || tabComponentSelect.value;
                const scope = scopeSelect.value;
                
                // Build CSS selector
                let selector = `.${component}`;
                if (scope.includes('projects')) {
                    selector += '.projects';
                }
                if (scope.includes('.')) {
                    const tabScope = scope.split('.')[1];
                    selector += `.${tabScope}`;
                }
                
                // Build breadcrumb
                let breadcrumb = 'Projects';
                if (editLevel !== 'page-level') {
                    breadcrumb += ` → ${editLevel.charAt(0).toUpperCase() + editLevel.slice(1)}`;
                }
                breadcrumb += ` → ${component.charAt(0).toUpperCase() + component.slice(1)}`;
                breadcrumb += ` → ${scope.charAt(0).toUpperCase() + scope.slice(1).replace('.', ' → ')}`;
                
                // Update UI
                document.getElementById('css-selector').value = selector;
                document.getElementById('scope-breadcrumb').value = breadcrumb;
                document.getElementById('editing-indicator').textContent = `Editing: ${selector}`;
                
                // Load sample variables
                const sampleVars = getSampleVariables(component);
                document.getElementById('component-variables').value = JSON.stringify(sampleVars, null, 2);
                
                // Update selection info
                document.getElementById('selection-info').innerHTML = `
                    <strong>Edit Level:</strong> ${editLevel === 'page-level' ? 'Page Level' : editLevel + ' Tab'}<br>
                    <strong>Component:</strong> ${component.charAt(0).toUpperCase() + component.slice(1)}<br>
                    <strong>Scope:</strong> ${scope}<br>
                    <strong>CSS Selector:</strong> ${selector}<br>
                    <strong>Variables:</strong> ${Object.keys(sampleVars).length} properties
                `;
                
                // Show editor sections
                componentEditor.style.display = 'block';
                selectionSummary.style.display = 'block';
                
                helperText.textContent = 'Edit the component variables below and click Update Component.';
                
                console.log(`Progressive selection complete: ${selector} (${breadcrumb})`);
            }
            
            // Function to get sample variables based on component
            function getSampleVariables(component) {
                const variables = {
                    'card': {
                        "background": "studio-bg-card",
                        "border": "studio-border-thick solid studio-border-primary",
                        "borderRadius": "studio-radius-xl",
                        "minHeight": "320px",
                        "padding": "studio-space-4",
                        "transition": "all 0.2s ease"
                    },
                    'section-title': {
                        "fontSize": "studio-text-interface",
                        "fontWeight": "600",
                        "color": "studio-text-subtle",
                        "marginBottom": "studio-space-3",
                        "textTransform": "uppercase",
                        "letterSpacing": "1px"
                    },
                    'grid-layout': {
                        "display": "grid",
                        "gridTemplateColumns": "repeat(auto-fit, minmax(320px, 1fr))",
                        "gap": "studio-space-5",
                        "padding": "studio-space-6"
                    }
                };
                
                return variables[component] || { "property": "value" };
            }

            console.log('🎯 DEV PANEL - Progressive Disclosure Ready');
            console.log('📋 Left: Page navigation');
            console.log('📝 Right: Progressive component selection');
            console.log('🖼️ Center: Live preview with full view toggle');
            console.log('🔄 Interface reveals options progressively');
        });

        // Update component function (placeholder)
        function updateComponent() {
            const textarea = document.getElementById('component-variables');
            try {
                const variables = JSON.parse(textarea.value);
                console.log('💾 Updating component variables:', variables);
                alert('Component updated!\\n(This would update the JSON and refresh the preview)');
            } catch (error) {
                alert('❌ Invalid JSON format');
            }
        }
        
        // Copy CSS selector to clipboard
        function copyCSSSelector() {
            const selector = document.getElementById('css-selector').value;
            navigator.clipboard.writeText(selector).then(function() {
                console.log('📋 Copied to clipboard:', selector);
                alert(`Copied to clipboard:\\n${selector}`);
            }).catch(function(err) {
                console.error('Could not copy text: ', err);
                alert('Could not copy to clipboard');
            });
        }
        
        // Toggle full view of preview
        function toggleFullPreview() {
            try {
                const app = document.querySelector('.dp-app');
                const toggleBtn = document.getElementById('full-view-toggle');
                
                console.log('🔍 Toggle full preview triggered');
                
                if (app && toggleBtn) {
                    const isFullView = app.classList.contains('full-view');
                    
                    if (isFullView) {
                        // Restore normal view
                        app.classList.remove('full-view');
                        toggleBtn.textContent = '🔍 Full View';
                        console.log('📋 Normal view restored');
                    } else {
                        // Activate full preview
                        app.classList.add('full-view');
                        toggleBtn.textContent = '📋 Normal View';
                        console.log('🔍 Full preview mode activated');
                    }
                } else {
                    console.error('Could not find app container or toggle button');
                }
            } catch (error) {
                console.error('Error in toggleFullPreview:', error);
                alert('Error toggling full view. Check console for details.');
            }
        }

        // Simplified desktop-only panel

        // Add button functionality after DOM loads
        document.addEventListener('DOMContentLoaded', function() {
            // Wait for buttons to be available
            setTimeout(function() {
                // Find buttons more specifically to avoid conflicts
                const updateBtn = document.querySelector('#component-editor .dp-button:not(.secondary)');
                const copyBtn = document.querySelector('#component-editor .dp-button.secondary:last-of-type');
                const fullViewBtn = document.getElementById('full-view-toggle');
                
                if (updateBtn) {
                    updateBtn.addEventListener('click', updateComponent);
                    console.log('✅ Update button handler added');
                }
                if (copyBtn) {
                    copyBtn.addEventListener('click', copyCSSSelector);
                    console.log('✅ Copy button handler added');
                }
                if (fullViewBtn) {
                    console.log('✅ Full view button found, onclick already set');
                }

                console.log('🎯 Desktop-only dev panel initialized');
            }, 100);
        });
    </script>
</body>
</html>